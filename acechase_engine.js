var window=self;importScripts("./acechase_lib.js"),function(e){function t(t){for(var o,i,a=t[0],c=t[1],l=t[2],h=0,d=[];h<a.length;h++)i=a[h],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&d.push(s[i][0]),s[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);for(u&&u(t);d.length;)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,a=1;a<n.length;a++){var c=n[a];0!==s[c]&&(o=!1)}o&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},s={1:0},r=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var a=window.webpackJsonp=window.webpackJsonp||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var u=c;r.push([73,0]),n()}({11:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(1),s=n(3);class r{constructor(e={}){this.position=o.d.fromValues(0,0,0),this.orientation=o.b.fromValues(0,0,0,1),this.scaling=o.d.fromValues(1,1,1),this.kind=e.kind,Object(s.b)(this,e,["position","orientation","scaling"])}}},15:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(11),s=n(3);class r extends o.a{constructor(e={}){super(e),this.kind="camera",this.nearClip=.1,this.farClip=1e3,this.verticalAngleOfViewInDeg=40,this.onAspectChange=function(e){},Object(s.b)(this,e,["nearClip","farClip","verticalAngleOfViewInDeg"])}}},3:function(e,t,n){"use strict";function o(e,t,n){for(const o of n)e[o]=t[o]}function s(e,t,n){for(const o of n)o in t&&(e[o]=t[o])}n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}))},5:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));function o(...e){0}function s(e,t){o(JSON.stringify("function"==typeof t?t():t));let n={};function i(){return"function"==typeof t&&(o(e.remoteOtherIndexCounter,JSON.stringify(t())),e.enqueueMsg({kind:"link",path:t()}),t=e.remoteOtherIndexCounter--),t}function a(){e.enqueueMsg({kind:"del",id:i()}),t=void 0}return new Proxy(Object,{set:(t,n,o)=>(e.enqueueMsg({kind:"set",id:i(),prop:n,val:r(e,o)}),!0),get(o,r,c){if("then"!==r)return"__ref__"===r?i():"dispose"===r?a:(r in n||(n[r]=s(e,function(e,t){return function(){return"function"==typeof e?[...e(),t]:[e,t]}}(t,r))),n[r])},apply:(t,n,a)=>(e.enqueueMsg({kind:"call",id:i(),args:r(e,a)}),o(i(),e.remoteOtherIndexCounter),s(e,e.remoteOtherIndexCounter--)),construct:(t,n)=>(e.enqueueMsg({kind:"new",id:i(),args:r(e,n)}),o(i(),e.remoteOtherIndexCounter),s(e,e.remoteOtherIndexCounter--))})}function r(e,t){switch(typeof t){case"undefined":case"number":case"string":case"boolean":return t;case"object":return function(e,t){let n=Array.isArray(t)?[]:{};for(let o in t){let s=r(e,t[o]);"object"==typeof s&&("__cb__"in s&&(n.__cb__=!0),"__ref__"in s&&(n.__ref__=!0)),n[o]=s}return n}(e,t);case"function":return void 0===t.__ref__?function(e,t){if(void 0===t.__cb__){o(e.localOwnIndexCounter),o();let n=e.localOwnIndexCounter++;return t.__cb__=n,e.localRegistry[n]=t,{__cb__:"new"}}return{__cb__:t.__cb__}}(e,t):{__ref__:t.__ref__}}throw new Error("unsendable type: "+typeof t)}function i(e,t){switch(typeof t){case"undefined":case"number":case"string":case"boolean":return t;case"object":return function(e,t){if("__cb__"in t){if("number"==typeof t.__cb__)return s(e,t.__cb__);if("new"===t.__cb__)return o(e.remoteOwnIndexCounter),s(e,e.remoteOwnIndexCounter++);if(!0===t.__cb__){for(let n in t)t[n]=i(e,t[n]);return t}throw new Error("unexpected callback reference type")}if("__ref__"in t){if("number"==typeof t.__ref__||"string"==typeof t.__ref__)return e.localRegistry[t.__ref__];if(!0===t.__ref__){for(let n in t)t[n]=i(e,t[n]);return t}throw new Error("unexpected reference type")}return t}(e,t)}}function a(e,t){switch(t.kind){case"ready":!function(e){e.connected=!0,e.sendWhenConnected&&e.sendAll()}(e);break;case"reg":!function(e,t){if(e.remoteRegistry.add(t.id),t.id in e.pendingProxies)for(let n of e.pendingProxies[t.id])n()}(e,t);break;case"link":!function(e,t){let n=e.localRegistry;for(let e of t.path){let t=n[e];"function"==typeof t&&(t=t.bind(n)),n=t}if("object"!=typeof n&&"function"!=typeof n)throw new Error("tried to link a field which is not an object or a method: "+t.path);0;e.localRegistry[e.localOtherIndexCounter--]=n}(e,t);break;case"call":!function(e,t){let n=e.localRegistry[t.id](...i(e,t.args));"object"==typeof n||"function"==typeof n?e.localRegistry[e.localOtherIndexCounter--]=n:(void 0!==n&&console.warn("result of remotely called function will be ignored"),e.localOtherIndexCounter--)}(e,t);break;case"new":!function(e,t){let n=new e.localRegistry[t.id](...i(e,t.args));0;e.localRegistry[e.localOtherIndexCounter--]=n}(e,t);break;case"set":!function(e,t){e.localRegistry[t.id][t.prop]=i(e,t.val)}(e,t);break;case"del":!function(e,t){void 0!==e.localRegistry[t.id].dispose&&e.localRegistry[t.id].dispose();delete e.localRegistry[t.id]}(e,t)}}var c=function(e,t,n,o){return new(n||(n=Promise))((function(s,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((o=o.apply(e,t||[])).next())}))};class l{constructor(e){this.worker=void 0,this.connected=!1,this.sendWhenConnected=!1,this.localRegistry={},this.remoteRegistry=new Set,this.pendingProxies={},this.localOwnIndexCounter=1,this.localOtherIndexCounter=-1,this.remoteOwnIndexCounter=1,this.remoteOtherIndexCounter=-1,this.msgQueue=[],void 0!==e?(this.worker=new Worker(e),this.worker.onmessage=this.receive.bind(this)):(onmessage=this.receive.bind(this),this.enqueueMsg({kind:"ready"}),this.sendAll(),this.connected=!0)}enqueueMsg(e){this.msgQueue.push(e)}sendAll(){if(0!=this.msgQueue.length){o();for(let e of this.msgQueue)o(JSON.stringify(e));void 0!==this.worker?this.connected?(this.worker.postMessage(this.msgQueue),this.msgQueue=[]):this.sendWhenConnected=!0:(postMessage(this.msgQueue),this.msgQueue=[])}}receive(e){for(let t in e.data){let n=e.data[t];o(),o(),a(this,n)}}register(e,t){o(),this.localRegistry[t]=e,this.enqueueMsg({kind:"reg",id:t})}createProxy(e){return c(this,void 0,void 0,(function*(){if(!isNaN(e))throw new Error("numeric indices are reserved for anonymous objects");if(e in this.remoteRegistry)return s(this,e);{let t=this;return new Promise((function(n){e in t.pendingProxies||(t.pendingProxies[e]=[]),t.pendingProxies[e].push((function(){n(s(t,e))}))}))}}))}}let u;void 0!==window.document?(console.log("loading engine"),u=new l("./acechase_engine.js")):u=new l},73:function(e,t,n){"use strict";n.r(t);var o=n(5),s=function(e,t,n,o){return new(n||(n=Promise))((function(s,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((o=o.apply(e,t||[])).next())}))};var r=n(3),i=n(11);class a extends i.a{constructor(e={}){super(e),this.kind="mesh",this.baseColor={r:1,g:1,b:1},this.accentColor={r:1,g:1,b:1},Object(r.b)(this,e,["baseColor","accentColor"])}}class c extends a{constructor(e){super(e),this.asset=e.asset}}class l{constructor(e,t){this.note=t,this.check=e}}var u=n(6),h=n(1);class d{updateP2(){this.p2shape.updateBoundingRadius(),null!==this.p2shape.body&&(this.p2shape.body.aabbNeedsUpdate=!0,this.p2shape.body.updateBoundingRadius())}set offset(e){h.c.copy(this.p2shape.position,e)}get offset(){return h.c.clone(this.p2shape.position)}set offsetAngle(e){this.p2shape.angle=e}get offsetAngle(){return this.p2shape.angle}}const p=new class{constructor(){this.constructors={}}register(e,t){this.constructors[e]=t}createShape(e){if(!this.constructors.hasOwnProperty(e.kind))throw new Error("P2ShapeFactory cannot create a "+e.kind);return new this.constructors[e.kind](e)}};class f{constructor(e,t){this.toBeDeleted=!1,this.p2world=e,this.p2body=new u.Body,this.p2body.actor=t.actor,delete t.actor,Object.assign(this,t),t.actor=this.p2body.actor;for(let e of t.shapes){let t=p.createShape(e);this.p2body.addShape(t.p2shape)}this.p2world.addBody(this.p2body)}get actor(){return this.p2body.actor}set mass(e){e===1/0?this.p2body.type=u.Body.STATIC:(this.p2body.type=u.Body.DYNAMIC,this.p2body.mass=e),this.p2body.updateMassProperties()}get mass(){return this.p2body.type===u.Body.STATIC?1/0:this.p2body.mass}set position(e){h.c.copy(this.p2body.position,e)}get position(){return h.c.clone(this.p2body.position)}set velocity(e){h.c.copy(this.p2body.velocity,e)}get velocity(){return h.c.clone(this.p2body.velocity)}set damping(e){this.p2body.damping=e}get damping(){return this.p2body.damping}set angle(e){this.p2body.angle=e}get angle(){return this.p2body.angle}set angularVelocity(e){this.p2body.angularVelocity=e}get angularVelocity(){return this.p2body.angularVelocity}set angularDamping(e){this.p2body.angularDamping=e}get angularDamping(){return this.p2body.angularDamping}applyForce(e,t=h.c.fromValues(0,0)){this.p2body.applyForce([e[0],e[1]],[t[0],t[1]])}applyLocalForce(e,t=h.c.fromValues(0,0)){this.p2body.applyForceLocal([e[0],e[1]],[t[0],t[1]])}applyImpulse(e,t=h.c.fromValues(0,0)){this.p2body.applyImpulse([e[0],e[1]],[t[0],t[1]])}applyLocalImpulse(e,t=h.c.fromValues(0,0)){this.p2body.applyImpulseLocal([e[0],e[1]],[t[0],t[1]])}applyTorque(e){this.p2body.angularForce+=e}applyAngularMomentum(e){this.p2body.angularVelocity+=this.p2body.invInertia*e}remove(){this.p2world.removeBody(this.p2body)}}let g=u.Broadphase.canCollide;function b(e){let t=e.bodyA.actor,n=e.bodyB.actor,o=t.roles,s=n.roles,r=e.bodyA.world.collisionHandlers;for(let e of o.set)for(let o of s.set){let s=r[e.bit|o.bit];void 0!==s&&(s.roleA===e?s.onCollision(t,n):s.onCollision(n,t))}}u.Broadphase.canCollide=function(e,t){if(!g(e,t))return!1;let n=e.actor,o=t.actor,s=n.roles,r=o.roles;if(0==(s.mask&r.bits))return!1;let i=e.world.collisionOverridesBitMask;if(0==(i&s.bits)||0==(i&r.bits))return!0;let a=e.world.collisionOverrides;for(let e of a){if(e.roleA.bit&s.bits&&e.roleB.bit&r.bits&&!1===e.allowCollision(n,o))return!1;if(e.roleA.bit&r.bits&&e.roleB.bit&s.bits&&s.bits!=r.bits&&!1===e.allowCollision(o,n))return!1}return!0};p.register("circle",class extends d{constructor(e){super(),this.p2shape=new u.Circle,Object.assign(this,e)}set radius(e){this.p2shape.radius=e,this.updateP2()}get radius(){return this.p2shape.radius}set boundingRadius(e){this.p2shape.radius=e,this.updateP2()}get boundingRadius(){return this.p2shape.boundingRadius}});p.register("triangle",class extends d{constructor(e){super();let t=u.Convex.triangleArea(e.corners[0],e.corners[1],e.corners[2]);Math.abs(t)<1e-100?(this.p2shape=new u.Convex,console.error("degenerate triangle")):this.p2shape=t>0?new u.Convex({vertices:e.corners}):new u.Convex({vertices:[e.corners[0],e.corners[2],e.corners[1]]}),Object.assign(this,e)}set corners(e){this.p2shape.vertices=e,this.updateP2()}get corners(){return this.p2shape.vertices}set boundingRadius(e){if(e<=0)return void console.error("triangle bounding radius must be >0");let t=e/this.p2shape.boundingRadius;for(let e of this.p2shape.vertices)e[0]*=t,e[1]*=t;this.updateP2()}get boundingRadius(){return this.p2shape.boundingRadius}});class y{constructor(e){this.offset=h.c.fromValues(0,0),this.offsetAngle=0,this.kind=e.kind,Object(r.b)(this,e,["offset","offsetAngle"])}}class m extends y{constructor(e={}){super(e),this.kind="circle",this.radius=1,Object(r.b)(this,e,["radius"])}}class w{constructor(e){this.mass=1,this.position=h.c.fromValues(0,0),this.velocity=h.c.fromValues(0,0),this.damping=.1,this.angle=0,this.angularVelocity=0,this.angularDamping=.1,this.actor=e.actor,Object(r.b)(this,e,["shapes","mass","position","velocity","damping","angle","angularVelocity","angularDamping"])}}function _(e,t=Math.PI){let n=(e-t)/2/Math.PI;return 2*(n-Math.floor(n)-1)*Math.PI+t}function v(e){return[h.c.fromValues(e[0][0],e[0][1]),h.c.fromValues(e[1][0],e[1][1]),h.c.fromValues(e[2][0],e[2][1])]}var C=n(15);class k extends C.a{constructor(e={}){super(e),this.dMin=5,this.marginFactor=1.33,this.tau={xy:1,up:.3,down:2,focus:.3},this.tauFocus=.1,Object(r.b)(this,e,["dMin","tau","tauFocus","marginFactor"])}}class O{constructor(e,t){this.distanceOverWidth=1,this.distanceOverHeight=1,this.locks=new Set,this.camera=e.camera.create(t),this.distanceOverHeight=.5/Math.tan(.5*t.verticalAngleOfViewInDeg/180*Math.PI)*t.marginFactor;let n=this;this.camera.onAspectChange=function(e){n.distanceOverWidth=n.distanceOverHeight/e},this.dMin=t.dMin,this.tau=t.tau,this.currentPosition=t.position,this.currentFocus=h.d.fromValues(0,0,0)}follow(e,t){this.locks.add({body:e,radius:t})}unfollow(e){for(let t of this.locks)t.body===e&&this.locks.delete(t)}update(e){let t=1e12,n=-1e12,o=1e12,s=-1e12;for(let e of this.locks)t=Math.min(t,e.body.position[0]-e.radius),n=Math.max(n,e.body.position[0]+e.radius),o=Math.min(o,e.body.position[1]-e.radius),s=Math.max(s,e.body.position[1]+e.radius);let r=h.d.fromValues((t+n)/2,(o+s)/2,Math.max((n-t)*this.distanceOverWidth,(s-o)*this.distanceOverHeight,this.dMin)),i=Math.exp(-e/this.tau.xy),a=this.currentPosition[2]<r[2]?this.tau.up:this.tau.down,c=Math.exp(-e/a),l=h.d.fromValues(i,i,c),u=Math.exp(-e/this.tau.focus);for(let e=0;e<3;e++)this.currentPosition[e]=(1-l[e])*r[e]+l[e]*this.currentPosition[e];this.currentFocus[0]=(1-u)*this.currentFocus[0]+u*r[0],this.currentFocus[1]=(1-u)*this.currentFocus[1]+u*r[1];let d=h.d.subtract(h.d.create(),this.currentPosition,this.currentFocus);h.d.normalize(d,d);let p=h.d.fromValues(0,1,0),f=h.d.cross(h.d.create(),p,d);h.d.normalize(f,f),h.d.cross(p,d,f);let g=function(e,t,n,o){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=n[0],e[4]=n[1],e[5]=n[2],e[6]=o[0],e[7]=o[1],e[8]=o[2],e}(h.a.create(),f,p,d);this.camera.position=this.currentPosition,this.camera.orientation=h.b.fromMat3(h.b.create(),g)}}class x extends y{constructor(e={}){super(e),this.kind="triangle",this.corners=[h.c.fromValues(1,0),h.c.fromValues(-1,1),h.c.fromValues(-1,-1)],Object(r.b)(this,e,["corners"])}}class M{constructor(){this.bit=1<<M.numRoles,this.mask=0,M.numRoles+=1}}M.numRoles=0;class I{constructor(){this.bits=0,this.mask=0,this.set=new Set}}function P(e,t){Object.freeze(t),0==(e.roles.bits&t.bit)&&(e.roles.set.add(t),e.roles.bits|=t.bit,e.roles.mask|=t.mask)}function R(e,t){if(Object.isFrozen(e)||Object.isFrozen(t))throw new Error("roles can not be changed after being assigned to actors");e.mask|=t.bit,t.mask|=e.bit}class j{constructor(){this.roles=new I}update(){}}class A{constructor(){this.thrust=0,this.shooting=!1}getAbsoluteDirection(){return this.absobulteDirection}getTurnRate(){return this.turnRate}getThrust(){return this.thrust}isShooting(){return this.shooting}setPauseCallback(e){throw new Error("Method not implemented.")}setAbsoluteDirection(e){this.absobulteDirection=e}setTurnRate(e){this.turnRate=e}setThrust(e){this.thrust=e}setShooting(e){this.shooting=e}}class V{constructor(){this.connectedControllers=new Set,this.connectionCallbacks=new Set}addConnectionCallback(e){this.connectionCallbacks.add(e);for(const t of this.connectedControllers)e(t)}removeConnectionCallback(e){this.connectionCallbacks.delete(e)}controllerAdded(e){const t=function(e){let t=new A;return o.a.register(t,e),t}(e);this.connectedControllers.add(t);for(const e of this.connectionCallbacks)e(t)}}var S=function(e,t,n,o){return new(n||(n=Promise))((function(s,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((o=o.apply(e,t||[])).next())}))};let B,F,T,D=new class{constructor(){this.p2world=new u.World({gravity:[0,0]}),this.p2world.collisionOverrides=[],this.p2world.collisionOverridesBitMask=0,this.p2world.on("impact",b),this.p2world.collisionHandlers=[]}addRigidBody(e){return new f(this.p2world,e)}registerCollisionOverride(e){this.p2world.collisionOverrides.push(e),this.p2world.collisionOverridesBitMask|=e.roleA.bit|e.roleB.bit}registerCollisionHandler(e){this.p2world.collisionHandlers[e.mask]=e}step(e){this.p2world.step(e)}},q=new class{constructor({onItemCheck:e=(e=>{}),onComplete:t=(()=>{})}={}){this.items=new Set,this.numTotalItems=0,this.onItemCheck=e,this.onComplete=t}newItem({onCheck:e=(()=>{}),note:t}={}){this.numTotalItems++;let n=this,o=new l(()=>{e(),n.onItemCheck(o.note),n.items.delete(o),0==n.items.size&&n.onComplete()},t);return this.items.add(o),o}getProgress(){return 1-this.items.size/this.numTotalItems}reset(){this.items.clear(),this.numTotalItems=0}}({onComplete:function(){const e=new w({actor:null,shapes:[new m({radius:1})],damping:.7,angularDamping:.99}),t=new c({asset:F});let n=[];W.addConnectionCallback(o=>{for(let s=0;s<10;s++){let r=s<5?0:1,i=new L(e,t,o,r);i.mesh.baseColor=0==r?{r:1,g:.5,b:0}:{r:0,g:.5,b:1},i.mesh.accentColor=0==r?{r:1,g:.5,b:0}:{r:0,g:.5,b:1},i.body.position=h.c.fromValues(20*Math.random()-10,20*Math.random()-10),i.body.angle=1e3*Math.random(),n.push(i),T.follow(i.body,1.5)}}),setInterval(()=>{for(let e of n)e.update();D.step(.01),T.update(.01),o.a.sendAll()},10)}}),E=q.newItem(),Q=q.newItem(),H=q.newItem(),W=function(e){let t=new V;return o.a.register(t,e),t}("controllerManager"),z=new M,N=new j,J=new M;R(z,J),R(J,J),D.registerCollisionOverride(new class{constructor(e,t,n){this.roleA=e,this.roleB=t,this.allowCollision=n}}(J,J,(function(e,t){return!(1==e.team&&1==t.team)}))),D.registerCollisionHandler(new class{constructor(e,t,n){this.roleA=e,this.roleB=t,this.mask=e.bit&t.bit,this.onCollision=n}}(J,J,(function(e,t){if(e.team!=t.team){let n=h.c.subtract(h.c.create(),t.body.position,e.body.position);e.body.applyImpulse(h.c.scale(h.c.create(),n,-10)),t.body.applyImpulse(h.c.scale(h.c.create(),n,10))}}))),P(N,z),function(){S(this,void 0,void 0,(function*(){B=yield function(){return s(this,void 0,void 0,(function*(){return o.a.createProxy("graphicsServer")}))}(),B.control.setSceneOrientation([-Math.SQRT1_2,0,0,Math.SQRT1_2]),E.check(),T=new O(B,new k),T.camera.activate(),F=B.model.load("glider/glider.gltf",Q.check);let e=B.model.load("arenas/testarena2/testarena2.glb",(function(t){for(let e of t.collision)D.addRigidBody({actor:N,mass:1/0,position:[0,0],velocity:[0,0],damping:0,angle:0,angularVelocity:0,angularDamping:0,shapes:[new x({corners:v(e)})]});H.check(),B.mesh.createFromModel(new c({asset:e}))})),t=B.skybox.load("arenas/testarena2/environment/*.jpg",(function(){B.control.setEnvironment(t)}));o.a.sendAll()}))}();class L extends j{constructor(e,t,n,o){super(),this.team=0,this.thrust=0,e.actor=this,this.team=o,this.body=D.addRigidBody(e),this.mesh=B.mesh.createFromModel(t),this.controller=n,P(this,J)}update(){this.thrust=20*this.controller.getThrust(),this.body.applyLocalForce(h.c.fromValues(this.thrust,0));const e=this.controller.getTurnRate();null!=e&&this.body.applyTorque(20*e);const t=this.controller.getAbsoluteDirection();null!=t&&this.turnToDirection(t),this.mesh.position=[this.body.position[0],this.body.position[1],.1],this.mesh.orientation=h.b.fromEuler([0,0,0,0],0,0,this.body.angle/Math.PI*180)}turnToDirection(e){let t=_(this.body.angle),n=_(t-e);if(Math.abs(n)>1e-4){let e=Math.sign(n);this.body.applyAngularMomentum(.3*-e)}}}}});
//# sourceMappingURL=acechase_engine.js.map