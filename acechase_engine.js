var window=self;importScripts("./acechase_lib.js"),function(t){function e(e){for(var o,s,a=e[0],c=e[1],l=e[2],h=0,d=[];h<a.length;h++)s=a[h],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&d.push(i[s][0]),i[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);for(u&&u(e);d.length;)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,a=1;a<n.length;a++){var c=n[a];0!==i[c]&&(o=!1)}o&&(r.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},i={1:0},r=[];function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var a=window.webpackJsonp=window.webpackJsonp||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var u=c;r.push([73,0]),n()}({11:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n(1),i=n(3);class r{constructor(t={}){this.position=o.d.fromValues(0,0,0),this.orientation=o.b.fromValues(0,0,0,1),this.scaling=o.d.fromValues(1,1,1),this.kind=t.kind,Object(i.b)(this,t,["position","orientation","scaling"])}}},15:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n(11),i=n(3);class r extends o.a{constructor(t={}){super(t),this.kind="camera",this.nearClip=.1,this.farClip=1e3,this.verticalAngleOfViewInDeg=40,this.onAspectChange=function(t){},Object(i.b)(this,t,["nearClip","farClip","verticalAngleOfViewInDeg"])}}},3:function(t,e,n){"use strict";function o(t,e,n){for(const o of n)t[o]=e[o]}function i(t,e,n){for(const o of n)o in e&&(t[o]=e[o])}n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i}))},5:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));function o(...t){0}function i(t,e){o(JSON.stringify("function"==typeof e?e():e));let n={};function s(){return"function"==typeof e&&(o(t.remoteOtherIndexCounter,JSON.stringify(e())),t.enqueueMsg({kind:"link",path:e()}),e=t.remoteOtherIndexCounter--),e}function a(){t.enqueueMsg({kind:"del",id:s()}),e=void 0}return new Proxy(Object,{set:(e,n,o)=>(t.enqueueMsg({kind:"set",id:s(),prop:n,val:r(t,o)}),!0),get(o,r,c){if("then"!==r)return"__ref__"===r?s():"dispose"===r?a:(r in n||(n[r]=i(t,function(t,e){return function(){return"function"==typeof t?[...t(),e]:[t,e]}}(e,r))),n[r])},apply:(e,n,a)=>(t.enqueueMsg({kind:"call",id:s(),args:r(t,a)}),o(s(),t.remoteOtherIndexCounter),i(t,t.remoteOtherIndexCounter--)),construct:(e,n)=>(t.enqueueMsg({kind:"new",id:s(),args:r(t,n)}),o(s(),t.remoteOtherIndexCounter),i(t,t.remoteOtherIndexCounter--))})}function r(t,e){switch(typeof e){case"undefined":case"number":case"string":case"boolean":return e;case"object":return function(t,e){let n=Array.isArray(e)?[]:{};for(let o in e){let i=r(t,e[o]);"object"==typeof i&&("__cb__"in i&&(n.__cb__=!0),"__ref__"in i&&(n.__ref__=!0)),n[o]=i}return n}(t,e);case"function":return void 0===e.__ref__?function(t,e){if(void 0===e.__cb__){o(t.localOwnIndexCounter),o();let n=t.localOwnIndexCounter++;return e.__cb__=n,t.localRegistry[n]=e,{__cb__:"new"}}return{__cb__:e.__cb__}}(t,e):{__ref__:e.__ref__}}throw new Error("unsendable type: "+typeof e)}function s(t,e){switch(typeof e){case"undefined":case"number":case"string":case"boolean":return e;case"object":return function(t,e){if("__cb__"in e){if("number"==typeof e.__cb__)return i(t,e.__cb__);if("new"===e.__cb__)return o(t.remoteOwnIndexCounter),i(t,t.remoteOwnIndexCounter++);if(!0===e.__cb__){for(let n in e)e[n]=s(t,e[n]);return e}throw new Error("unexpected callback reference type")}if("__ref__"in e){if("number"==typeof e.__ref__||"string"==typeof e.__ref__)return t.localRegistry[e.__ref__];if(!0===e.__ref__){for(let n in e)e[n]=s(t,e[n]);return e}throw new Error("unexpected reference type")}return e}(t,e)}}function a(t,e){switch(e.kind){case"ready":!function(t){t.connected=!0,t.sendWhenConnected&&t.sendAll()}(t);break;case"reg":!function(t,e){if(t.remoteRegistry.add(e.id),e.id in t.pendingProxies){for(let n of t.pendingProxies[e.id])n();delete t.pendingProxies[e.id]}}(t,e);break;case"link":!function(t,e){let n=t.localRegistry;for(let t of e.path){let e=n[t];"function"==typeof e&&(e=e.bind(n)),n=e}if("object"!=typeof n&&"function"!=typeof n)throw new Error("tried to link a field which is not an object or a method: "+e.path);0;t.localRegistry[t.localOtherIndexCounter--]=n}(t,e);break;case"call":!function(t,e){let n=t.localRegistry[e.id](...s(t,e.args));"object"==typeof n||"function"==typeof n?t.localRegistry[t.localOtherIndexCounter--]=n:(void 0!==n&&console.warn("result of remotely called function will be ignored"),t.localOtherIndexCounter--)}(t,e);break;case"new":!function(t,e){let n=new t.localRegistry[e.id](...s(t,e.args));0;t.localRegistry[t.localOtherIndexCounter--]=n}(t,e);break;case"set":!function(t,e){t.localRegistry[e.id][e.prop]=s(t,e.val)}(t,e);break;case"del":!function(t,e){void 0!==t.localRegistry[e.id].dispose&&t.localRegistry[e.id].dispose();delete t.localRegistry[e.id]}(t,e)}}var c=function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{c(o.next(t))}catch(t){r(t)}}function a(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((o=o.apply(t,e||[])).next())}))};class l{constructor(t){this.worker=void 0,this.connected=!1,this.sendWhenConnected=!1,this.lastSent=0,this.localRegistry={},this.remoteRegistry=new Set,this.pendingProxies={},this.localOwnIndexCounter=1,this.localOtherIndexCounter=-1,this.remoteOwnIndexCounter=1,this.remoteOtherIndexCounter=-1,this.msgQueue=[],void 0!==t?(this.worker=new Worker(t),this.worker.onmessage=this.receive.bind(this)):(onmessage=this.receive.bind(this),this.enqueueMsg({kind:"ready"}),this.sendAll(),this.connected=!0);let e=this;setInterval((function(){(new Date).getTime()/1e3>e.lastSent+.1&&e.sendAll()}))}enqueueMsg(t){this.msgQueue.push(t)}sendAll(){if(this.lastSent=(new Date).getTime()/1e3,0!=this.msgQueue.length){o();for(let t of this.msgQueue)o(JSON.stringify(t));void 0!==this.worker?this.connected?(this.worker.postMessage(this.msgQueue),this.msgQueue=[]):this.sendWhenConnected=!0:(postMessage(this.msgQueue),this.msgQueue=[])}}receive(t){for(let e in t.data){let n=t.data[e];o(),o(),a(this,n)}}register(t,e){o(),this.localRegistry[e]=t,this.enqueueMsg({kind:"reg",id:e})}createProxy(t){return c(this,void 0,void 0,(function*(){if(!isNaN(t))throw new Error("numeric indices are reserved for anonymous objects");if(t in this.remoteRegistry)return i(this,t);{let e=this;return new Promise((function(n){t in e.pendingProxies||(e.pendingProxies[t]=[]),e.pendingProxies[t].push((function(){n(i(e,t))}))}))}}))}}let u;void 0!==window.document?(console.log("loading engine"),u=new l("./acechase_engine.js")):u=new l},73:function(t,e,n){"use strict";n.r(e);var o=n(5),i=function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{c(o.next(t))}catch(t){r(t)}}function a(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((o=o.apply(t,e||[])).next())}))};var r=n(1),s=n(15);function a(t,e=Math.PI){let n=(t-e)/2/Math.PI;return 2*(n-Math.floor(n)-1)*Math.PI+e}function c(t){return[r.c.fromValues(t[0][0],t[0][1]),r.c.fromValues(t[1][0],t[1][1]),r.c.fromValues(t[2][0],t[2][1])]}var l=n(3);class u extends s.a{constructor(t={}){super(t),this.dMin=5,this.marginFactor=1.33,this.tau={xy:1,up:.3,down:2,focus:.3},this.tauFocus=.1,Object(l.b)(this,t,["dMin","tau","tauFocus","marginFactor"])}}class h{constructor(t,e){this.distanceOverWidth=1,this.distanceOverHeight=1,this.locks=new Set,this.camera=t.camera.create(e),this.distanceOverHeight=.5/Math.tan(.5*e.verticalAngleOfViewInDeg/180*Math.PI)*e.marginFactor;let n=this;this.camera.onAspectChange=function(t){n.distanceOverWidth=n.distanceOverHeight/t},this.dMin=e.dMin,this.tau=e.tau,this.currentPosition=e.position,this.currentFocus=r.d.fromValues(0,0,0)}follow(t,e){this.locks.add({body:t,radius:e})}unfollow(t){for(let e of this.locks)e.body===t&&this.locks.delete(e)}update(t){let e=1e12,n=-1e12,o=1e12,i=-1e12;for(let t of this.locks)e=Math.min(e,t.body.position[0]-t.radius),n=Math.max(n,t.body.position[0]+t.radius),o=Math.min(o,t.body.position[1]-t.radius),i=Math.max(i,t.body.position[1]+t.radius);let s=r.d.fromValues((e+n)/2,(o+i)/2,Math.max((n-e)*this.distanceOverWidth,(i-o)*this.distanceOverHeight,this.dMin)),a=Math.exp(-t/this.tau.xy),c=this.currentPosition[2]<s[2]?this.tau.up:this.tau.down,l=Math.exp(-t/c),u=r.d.fromValues(a,a,l),h=Math.exp(-t/this.tau.focus);for(let t=0;t<3;t++)this.currentPosition[t]=(1-u[t])*s[t]+u[t]*this.currentPosition[t];this.currentFocus[0]=(1-h)*this.currentFocus[0]+h*s[0],this.currentFocus[1]=(1-h)*this.currentFocus[1]+h*s[1];let d=r.d.subtract(r.d.create(),this.currentPosition,this.currentFocus);r.d.normalize(d,d);let p=r.d.fromValues(0,1,0),f=r.d.cross(r.d.create(),p,d);r.d.normalize(f,f),r.d.cross(p,d,f);let g=function(t,e,n,o){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=n[0],t[4]=n[1],t[5]=n[2],t[6]=o[0],t[7]=o[1],t[8]=o[2],t}(r.a.create(),f,p,d);this.camera.position=this.currentPosition,this.camera.orientation=r.b.fromMat3(r.b.create(),g)}}var d=n(6);class p{updateP2(){this.p2shape.updateBoundingRadius(),null!==this.p2shape.body&&(this.p2shape.body.aabbNeedsUpdate=!0,this.p2shape.body.updateBoundingRadius())}set offset(t){r.c.copy(this.p2shape.position,t)}get offset(){return r.c.clone(this.p2shape.position)}set offsetAngle(t){this.p2shape.angle=t}get offsetAngle(){return this.p2shape.angle}}const f=new class{constructor(){this.constructors={}}register(t,e){this.constructors[t]=e}createShape(t){if(!this.constructors.hasOwnProperty(t.kind))throw new Error("P2ShapeFactory cannot create a "+t.kind);return new this.constructors[t.kind](t)}};class g{constructor(t,e){this.toBeDeleted=!1,this.p2world=t,this.p2body=new d.Body,this.p2body.actor=e.actor,delete e.actor,Object.assign(this,e),e.actor=this.p2body.actor;for(let t of e.shapes){let e=f.createShape(t);this.p2body.addShape(e.p2shape)}this.p2world.addBody(this.p2body)}get actor(){return this.p2body.actor}set mass(t){t===1/0?this.p2body.type=d.Body.STATIC:(this.p2body.type=d.Body.DYNAMIC,this.p2body.mass=t),this.p2body.updateMassProperties()}get mass(){return this.p2body.type===d.Body.STATIC?1/0:this.p2body.mass}set position(t){r.c.copy(this.p2body.position,t)}get position(){return r.c.clone(this.p2body.position)}set velocity(t){r.c.copy(this.p2body.velocity,t)}get velocity(){return r.c.clone(this.p2body.velocity)}set damping(t){this.p2body.damping=t}get damping(){return this.p2body.damping}set angle(t){this.p2body.angle=t}get angle(){return this.p2body.angle}set angularVelocity(t){this.p2body.angularVelocity=t}get angularVelocity(){return this.p2body.angularVelocity}set angularDamping(t){this.p2body.angularDamping=t}get angularDamping(){return this.p2body.angularDamping}applyForce(t,e=r.c.fromValues(0,0)){this.p2body.applyForce([t[0],t[1]],[e[0],e[1]])}applyLocalForce(t,e=r.c.fromValues(0,0)){this.p2body.applyForceLocal([t[0],t[1]],[e[0],e[1]])}applyImpulse(t,e=r.c.fromValues(0,0)){this.p2body.applyImpulse([t[0],t[1]],[e[0],e[1]])}applyLocalImpulse(t,e=r.c.fromValues(0,0)){this.p2body.applyImpulseLocal([t[0],t[1]],[e[0],e[1]])}applyTorque(t){this.p2body.angularForce+=t}applyAngularMomentum(t){this.p2body.angularVelocity+=this.p2body.invInertia*t}remove(){this.p2world.removeBody(this.p2body)}}let b=d.Broadphase.canCollide;function y(t){let e=t.bodyA.actor,n=t.bodyB.actor,o=e.roles,i=n.roles,r=t.bodyA.world.collisionHandlers;for(let t of o.set)for(let o of i.set){let i=r[t.bit|o.bit];void 0!==i&&(i.roleA===t?i.onCollision(e,n):i.onCollision(n,e))}}d.Broadphase.canCollide=function(t,e){if(!b(t,e))return!1;let n=t.actor,o=e.actor,i=n.roles,r=o.roles;if(0==(i.mask&r.bits))return!1;let s=t.world.collisionOverridesBitMask;if(0==(s&i.bits)||0==(s&r.bits))return!0;let a=t.world.collisionOverrides;for(let t of a){if(t.roleA.bit&i.bits&&t.roleB.bit&r.bits&&!1===t.allowCollision(n,o))return!1;if(t.roleA.bit&r.bits&&t.roleB.bit&i.bits&&i.bits!=r.bits&&!1===t.allowCollision(o,n))return!1}return!0};f.register("circle",class extends p{constructor(t){super(),this.p2shape=new d.Circle,Object.assign(this,t)}set radius(t){this.p2shape.radius=t,this.updateP2()}get radius(){return this.p2shape.radius}set boundingRadius(t){this.p2shape.radius=t,this.updateP2()}get boundingRadius(){return this.p2shape.boundingRadius}});f.register("triangle",class extends p{constructor(t){super();let e=d.Convex.triangleArea(t.corners[0],t.corners[1],t.corners[2]);Math.abs(e)<1e-100?(this.p2shape=new d.Convex,console.error("degenerate triangle")):this.p2shape=e>0?new d.Convex({vertices:t.corners}):new d.Convex({vertices:[t.corners[0],t.corners[2],t.corners[1]]}),Object.assign(this,t)}set corners(t){this.p2shape.vertices=t,this.updateP2()}get corners(){return this.p2shape.vertices}set boundingRadius(t){if(t<=0)return void console.error("triangle bounding radius must be >0");let e=t/this.p2shape.boundingRadius;for(let t of this.p2shape.vertices)t[0]*=e,t[1]*=e;this.updateP2()}get boundingRadius(){return this.p2shape.boundingRadius}});class m{constructor(){this.p2world=new d.World({gravity:[0,0]}),this.p2world.collisionOverrides=[],this.p2world.collisionOverridesBitMask=0,this.p2world.on("impact",y),this.p2world.collisionHandlers=[]}addRigidBody(t){return new g(this.p2world,t)}registerCollisionOverride(t){this.p2world.collisionOverrides.push(t),this.p2world.collisionOverridesBitMask|=t.roleA.bit|t.roleB.bit}registerCollisionHandler(t){this.p2world.collisionHandlers[t.mask]=t}step(t){this.p2world.step(t)}}class w{constructor(){this.bit=1<<w.numRoles,this.mask=0,w.numRoles+=1}}w.numRoles=0;class v{constructor(){this.bits=0,this.mask=0,this.set=new Set}}function _(t,e){Object.freeze(e),0==(t.roles.bits&e.bit)&&(t.roles.set.add(e),t.roles.bits|=e.bit,t.roles.mask|=e.mask)}function C(t,e){if(Object.isFrozen(t)||Object.isFrozen(e))throw new Error("roles can not be changed after being assigned to actors");t.mask|=e.bit,e.mask|=t.bit}var x=n(11);class O extends x.a{constructor(t={}){super(t),this.kind="mesh",this.baseColor={r:1,g:1,b:1},this.accentColor={r:1,g:1,b:1},Object(l.b)(this,t,["baseColor","accentColor"])}}class k extends O{constructor(t){super(t),this.asset=t.asset}}class M{constructor(t){this.mass=1,this.position=r.c.fromValues(0,0),this.velocity=r.c.fromValues(0,0),this.damping=.1,this.angle=0,this.angularVelocity=0,this.angularDamping=.1,this.actor=t.actor,Object(l.b)(this,t,["shapes","mass","position","velocity","damping","angle","angularVelocity","angularDamping"])}}class P{constructor(t){this.offset=r.c.fromValues(0,0),this.offsetAngle=0,this.kind=t.kind,Object(l.b)(this,t,["offset","offsetAngle"])}}class R extends P{constructor(t={}){super(t),this.kind="triangle",this.corners=[r.c.fromValues(1,0),r.c.fromValues(-1,1),r.c.fromValues(-1,-1)],Object(l.b)(this,t,["corners"])}}class I{constructor(){this.roles=new v}update(){}}var j=function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{c(o.next(t))}catch(t){r(t)}}function a(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((o=o.apply(t,e||[])).next())}))};class A extends P{constructor(t={}){super(t),this.kind="circle",this.radius=1,Object(l.b)(this,t,["radius"])}}var V=function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{c(o.next(t))}catch(t){r(t)}}function a(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((o=o.apply(t,e||[])).next())}))};class S extends I{constructor(t,e,n,o,i){super(),this.team=0,this.thrust=0,e.actor=this,this.team=i,this.body=t.physics.addRigidBody(e),this.mesh=t.graphics.mesh.createFromModel(n),this.controller=o}update(){this.thrust=20*this.controller.getThrust(),this.body.applyLocalForce(r.c.fromValues(this.thrust,0));const t=this.controller.getTurnRate();null!=t&&this.body.applyTorque(20*t);const e=this.controller.getAbsoluteDirection();null!=e&&this.turnToDirection(e),this.mesh.position=[this.body.position[0],this.body.position[1],.1],this.mesh.orientation=r.b.fromEuler([0,0,0,0],0,0,this.body.angle/Math.PI*180)}turnToDirection(t){let e=a(this.body.angle),n=a(e-t);if(Math.abs(n)>1e-4){let t=Math.sign(n);this.body.applyAngularMomentum(.3*-t)}}}class B{constructor(t,e,n){this.roleA=t,this.roleB=e,this.allowCollision=n}}class F{constructor(t,e,n){this.roleA=t,this.roleB=e,this.mask=t.bit&e.bit,this.onCollision=n}}var D=function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{c(o.next(t))}catch(t){r(t)}}function a(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((o=o.apply(t,e||[])).next())}))};let T=function(t){return D(this,void 0,void 0,(function*(){t.graphics.control.setSceneOrientation([-Math.SQRT1_2,0,0,Math.SQRT1_2]);let e=new w,n=new w;C(e,n),C(n,n),t.physics.registerCollisionOverride(new B(n,n,(function(t,e){return!(1==t.team&&1==e.team)}))),t.physics.registerCollisionHandler(new F(n,n,(function(t,e){if(t.team!=e.team){let n=r.c.subtract(r.c.create(),e.body.position,t.body.position);t.body.applyImpulse(r.c.scale(r.c.create(),n,-10)),e.body.applyImpulse(r.c.scale(r.c.create(),n,10))}}))),_(yield function(t,e,n=(()=>{})){return j(this,void 0,void 0,(function*(){return new Promise(o=>{let i=t.graphics.model.load(e,(function(e){let r=new I;for(let n of e.collision)t.physics.addRigidBody(new M({actor:r,mass:1/0,shapes:[new R({corners:c(n)})]}));t.graphics.mesh.createFromModel(new k({asset:i})),n(e),o(r)}))})}))}(t,"arenas/testy_mountains/mountains.glb"),e);let o=yield function(t){return V(this,void 0,void 0,(function*(){let e;yield new Promise((n,o)=>{e=t.graphics.model.load("game/entities/glider/glider.gltf",n,o)});const n=new M({actor:null,shapes:[new A({radius:1})],damping:.7,angularDamping:.99}),o=new k({asset:e});return function(e,i){return new S(t,n,o,i,e)}}))}(t);yield new Promise((e,n)=>{let o=t.graphics.skybox.load("arenas/testy_mountains/environment/*.jpg",(function(){t.graphics.control.setEnvironment(o),e()}),n)});let i=[];return t.controllerManager.addConnectionCallback(e=>{for(let s=0;s<10;s++){let a=s<5?0:1,c=o(a,e);_(c,n),c.mesh.baseColor=0==a?{r:1,g:.5,b:0}:{r:0,g:.5,b:1},c.mesh.accentColor=0==a?{r:1,g:.5,b:0}:{r:0,g:.5,b:1},c.body.position=r.c.fromValues(20*Math.random()-10,20*Math.random()-10),c.body.angle=1e3*Math.random(),t.actionCam.follow(c.body,1.5),i.push(c)}}),{update(e){t.physics.step(e),t.actionCam.update(e);for(let t of i)t.update()}}}))};class q{constructor(){this.thrust=0,this.shooting=!1}getAbsoluteDirection(){return this.absobulteDirection}getTurnRate(){return this.turnRate}getThrust(){return this.thrust}isShooting(){return this.shooting}setPauseCallback(t){throw new Error("Method not implemented.")}setAbsoluteDirection(t){this.absobulteDirection=t}setTurnRate(t){this.turnRate=t}setThrust(t){this.thrust=t}setShooting(t){this.shooting=t}}class E{constructor(){this.connectedControllers=new Set,this.connectionCallbacks=new Set}addConnectionCallback(t){this.connectionCallbacks.add(t);for(const e of this.connectedControllers)t(e)}removeConnectionCallback(t){this.connectionCallbacks.delete(t)}controllerAdded(t){const e=function(t){let e=new q;return o.a.register(e,t),e}(t);this.connectedControllers.add(e);for(const t of this.connectionCallbacks)t(e)}}var Q=function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{c(o.next(t))}catch(t){r(t)}}function a(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((o=o.apply(t,e||[])).next())}))};function H(){return Q(this,void 0,void 0,(function*(){let t=new m,e=yield function(){return i(this,void 0,void 0,(function*(){return o.a.createProxy("graphicsServer")}))}(),n=new h(e,new u);n.camera.activate();let r=function(t){let e=new E;return o.a.register(e,t),e}("controllerManager");return T({physics:t,graphics:e,actionCam:n,controllerManager:r})}))}!function(){Q(this,void 0,void 0,(function*(){!function(t){setInterval(()=>{t.update(.01),o.a.sendAll()},10)}(yield H())}))}()}});
//# sourceMappingURL=acechase_engine.js.map