!function(e){function t(t){for(var r,o,a=t[0],c=t[1],h=t[2],u=0,p=[];u<a.length;u++)o=a[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(l&&l(t);p.length;)p.shift()();return i.push.apply(i,h||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],r=!0,a=1;a<s.length;a++){var c=s[a];0!==n[c]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=s[0]))}return e}var r={},n={2:0},i=[];function o(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=r,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(s,r,function(t){return e[t]}.bind(null,r));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var a=window.webpackJsonp=window.webpackJsonp||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var h=0;h<a.length;h++)t(a[h]);var l=c;i.push([71,0]),s()}({12:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var r=s(6),n=s(1);const i=new class{constructor(){this.factories={}}register(e,t){this.factories[e]=t}createShape(e){if(!this.factories.hasOwnProperty(e.kind))throw new Error("P2ShapeFactory cannot create a "+e.kind);return new this.factories[e.kind](e)}},o={mass:1,position:n.b.fromValues(0,0),velocity:n.b.fromValues(0,0),damping:.1,angle:0,angularVelocity:0,angularDamping:.1};class a{constructor(e,t){this.toBeDeleted=!1,this.p2world=e,this.p2body=new r.Body({mass:1});const s=Object.assign(Object.assign({},o),t);Object.assign(this,s);for(let e of t.shapes){let t=i.createShape(e);this.p2body.addShape(t.p2shape)}this.p2world.addBody(this.p2body)}set mass(e){this.p2body.mass=e,this.p2body.updateMassProperties()}get mass(){return this.p2body.mass}set position(e){n.b.copy(this.p2body.position,e)}get position(){return n.b.clone(this.p2body.position)}set velocity(e){n.b.copy(this.p2body.velocity,e)}get velocity(){return n.b.clone(this.p2body.velocity)}set damping(e){this.p2body.damping=e}get damping(){return this.p2body.damping}set angle(e){this.p2body.angle=e}get angle(){return this.p2body.angle}set angularVelocity(e){this.p2body.angularVelocity=e}get angularVelocity(){return this.p2body.angularVelocity}set angularDamping(e){this.p2body.angularDamping=e}get angularDamping(){return this.p2body.angularDamping}applyForce(e,t=n.b.fromValues(0,0)){this.p2body.applyForce([e[0],e[1]],[t[0],t[1]])}applyLocalForce(e,t=n.b.fromValues(0,0)){this.p2body.applyForceLocal([e[0],e[1]],[t[0],t[1]])}applyImpulse(e,t=n.b.fromValues(0,0)){this.p2body.applyImpulse([e[0],e[1]],[t[0],t[1]])}applyLocalImpulse(e,t=n.b.fromValues(0,0)){this.p2body.applyImpulseLocal([e[0],e[1]],[t[0],t[1]])}applyTorque(e){this.p2body.angularForce+=e}applyAngularMomentum(e){this.p2body.angularVelocity+=this.p2body.invInertia*e}remove(){this.p2world.removeBody(this.p2body)}}const c={offset:n.b.fromValues(0,0),offsetAngle:0},h=Object.assign(Object.assign({},c),{radius:1});i.register("circle",class extends class{updateP2(){this.p2shape.updateBoundingRadius(),null!==this.p2shape.body&&(this.p2shape.body.aabbNeedsUpdate=!0,this.p2shape.body.updateBoundingRadius())}set offset(e){n.b.copy(this.p2shape.position,e)}get offset(){return n.b.clone(this.p2shape.position)}set offsetAngle(e){this.p2shape.angle=e}get offsetAngle(){return this.p2shape.angle}}{constructor(e){const t=Object.assign(Object.assign({},h),e);super(),this.p2shape=new r.Circle,Object.assign(this,t)}set radius(e){this.p2shape.radius=e,this.updateP2()}get radius(){return this.p2shape.radius}set boundingRadius(e){this.p2shape.radius=e,this.updateP2()}get boundingRadius(){return this.p2shape.boundingRadius}});class l{constructor(){this.p2world=new r.World({gravity:[0,0]})}addRigidBody(e){return new a(this.p2world,e)}step(e){this.p2world.step(e)}}},71:function(e,t,s){"use strict";s.r(t);const r=new class{constructor(){this.factories={}}register(e,t){this.factories[e]=t}createAsset(e,t,s){if(!this.factories.hasOwnProperty(e.kind))throw new Error("ThreeAssetFactory cannot create a "+e.kind);return new this.factories[e.kind](e,t,s)}};var n=s(52),i=s(1);const o={position:i.c.fromValues(0,0,0),orientation:i.a.fromValues(0,0,0,1),scaling:i.c.fromValues(1,1,1)};new class{constructor(){this.factories={}}register(e,t){this.factories[e]=t}createGraphicsObject(e){return new this.factories[e.kind](e)}};const a=Object.assign(Object.assign({},o),{nearClip:.1,farClip:1e3,verticalAngleOfViewInDeg:40});var c=s(0);class h{set position(e){this.threeObject.position.set(e[0],e[1],e[2])}set orientation(e){this.threeObject.quaternion.set(e[0],e[1],e[2],e[3])}set scaling(e){this.threeObject.scale.set(e[0],e[1],e[2])}remove(){this.threeScene.remove(this.threeObject)}}const l=new class{constructor(){this.factories={}}register(e,t){this.factories[e]=t}createObject(e,t){if(!this.factories.hasOwnProperty(t.kind))throw new Error("ThreeObjectFactory cannot create a "+t.kind);return new this.factories[t.kind](e,t)}};const u=new(s(53).a);r.register("model",class{constructor(e,t,s){this.model=null;const r=this;u.load(e.file,(function(e){r.model=e.scene,t()}),e=>{},s)}});const p=Object.assign(Object.assign({},o),{color:{r:1,g:1,b:1}});l.register("model",class extends h{constructor(e,t){const{kind:s,position:r,orientation:n,scaling:i,asset:o,color:a}=Object.assign(Object.assign({},p),t);super(),this.threeScene=e,this.threeObject=o.model.clone(),Object.assign(this,{kind:s,position:r,orientation:n,scaling:i,color:a}),this.threeScene.add(this.threeObject)}});l.register("camera",class extends h{constructor(e,t){const s=Object.assign(Object.assign({},a),t);super(),this.threeScene=e,this.threeObject=new c.S,Object.assign(this,s),this.threeScene.add(this.threeObject)}set nearClip(e){this.threeObject.near=e,this.threeObject.updateProjectionMatrix()}set farClip(e){this.threeObject.far=e,this.threeObject.updateProjectionMatrix()}set verticalAngleOfViewInDeg(e){this.threeObject.fov=e,this.threeObject.updateProjectionMatrix()}activate(){this.threeScene.userData.activeCamera=this.threeObject}});class d{constructor(e,t){this.note=t,this.check=e}}var g,b=s(12);!function(e){e.UP="KeyW",e.DOWN="KeyS",e.RIGHT="KeyD",e.LEFT="KeyA",e.SHOOT="Space",e.PAUSE="Pause"}(g||(g={}));class y{constructor(){this.shooting=!1,this.currentStrategy=new m,document.addEventListener("keydown",e=>{this.onKeyAction(e,1)}),document.addEventListener("keyup",e=>{this.onKeyAction(e,0)})}getAbsoluteDirection(){return this.currentStrategy.getAbsoluteDirection()}getTurnRate(){return this.currentStrategy.getTurnRate()}getThrust(){return this.currentStrategy.getThrust()}isShooting(){return this.shooting}setPauseCallback(e){throw new Error("Method not implemented.")}onKeyAction(e,t){e.repeat||(this.onGeneralKeyAction(e.code,t),this.currentStrategy.onKeyAction(e.code,t))}onGeneralKeyAction(e,t){e==g.SHOOT&&(this.shooting=0!=t)}}class m{constructor(){this.turnRate=0,this.thrust=0}getAbsoluteDirection(){}getTurnRate(){return this.turnRate}getThrust(){return this.thrust}onKeyAction(e,t){e==g.UP&&(this.thrust=t),this.turnRate=0,e==g.LEFT&&(this.turnRate+=t),e==g.RIGHT&&(this.turnRate-=t)}}let f=new class{constructor(e){this.canvas=e,this.renderer=new c.qb({canvas:e}),this.scene=new c.cb;const t=new c.S(a.verticalAngleOfViewInDeg,1,a.nearClip,a.farClip);t.position.set(0,0,10),this.scene.add(t),this.scene.userData.activeCamera=t,new n.a(t,this.renderer.domElement).screenSpacePanning=!0,this.scene.add(new c.o("white","black")),this.scene.add(new c.b);const s=this,r=()=>{s.renderer.setSize(s.canvas.clientWidth,s.canvas.clientHeight,!1);const t=this.scene.userData.activeCamera;t.aspect=e.clientWidth/e.clientHeight,t.updateProjectionMatrix()};window.addEventListener("resize",r),r()}loadAsset(e,t,s){return r.createAsset(e,t,s)}addObject(e){return l.createObject(this.scene,e)}update(e){this.renderer.render(this.scene,this.scene.userData.activeCamera)}}(document.getElementById("rendertarget")),w=new b.a;class O{constructor(e,t,s){this.thrust=0,this.angularMomentum=0,this.body=w.addRigidBody(e),this.model=f.addObject(t),this.controller=s}update(){this.thrust=10*this.controller.getThrust(),this.body.applyLocalForce(i.b.fromValues(this.thrust,0)),this.angularMomentum=.3*this.controller.getTurnRate(),null!=this.angularMomentum&&this.body.applyAngularMomentum(this.angularMomentum),this.model.position=[this.body.position[0],this.body.position[1],0],this.model.orientation=i.a.fromEuler([0,0,0,0],0,0,this.body.angle/Math.PI*180)}}let j=new class{constructor({onItemCheck:e=(e=>{}),onComplete:t=(()=>{})}={}){this.items=new Set,this.numTotalItems=0,this.onItemCheck=e,this.onComplete=t}newItem({onCheck:e=(()=>{}),note:t}={}){this.numTotalItems++;let s=this,r=new d(()=>{e(),s.onItemCheck(r.note),s.items.delete(r),0==s.items.size&&s.onComplete()},t);return this.items.add(r),r}getProgress(){return 1-this.items.size/this.numTotalItems}reset(){this.items.clear(),this.numTotalItems=0}}({onComplete:function(){const e={shapes:[{kind:"circle",radius:1}],damping:.7,angularDamping:.99},t={kind:"model",asset:v,color:{r:1,g:1,b:1}},s=new y;let r=[];for(let n=0;n<50;n++){let n=new O(e,t,s);n.body.position=i.b.fromValues(20*Math.random()-10,20*Math.random()-10),n.body.angle=1e3*Math.random(),r.push(n)}requestAnimationFrame((function e(t){requestAnimationFrame(e);for(let e of r)e.update();w.step(1/60),f.update(t)}))}}).newItem();const v=f.loadAsset({kind:"model",file:"glider/glider.gltf"},j.check)}});
//# sourceMappingURL=acechase_ui.js.map